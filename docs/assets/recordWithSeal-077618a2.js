import{g as e,j as a,P as t,a3 as l,n as o}from"./chunk-vform-d740b35c.js";import{_ as s}from"./gengduo-caozuo-730fe1cb.js";import{J as n}from"./JyTable-d62bb35b.js";import{c as i}from"./JyTabs-726242c5.js";import{c as p}from"./documentsDetails-8b022303.js";import{d as r,l as d,a as u,b as m,c,e as y,f as b,g as h,h as f}from"./listUsing-651ca84e.js";import{R as g}from"./RecordSealToReview-dca792f4.js";import{a as v}from"./sealApplyIntellect-1d3f9162.js";import{a as D}from"./actionOneDialog-54db6636.js";import{A as S}from"./ApproverApi-e2fa2d39.js";import{s as w}from"./listApprovingJson-a70956ef.js";import{a as A}from"./actionMoreDialog-7035c1c1.js";import{r as T,b as M,a9 as x,a1 as J,C as j,F as I,G as U,B,N,H as _,u as k,J as E,Q as R,R as C,n as q,V as F,W as Y}from"./chunk-element-plus-a77de3d2.js";import"./sangedian-6ea00dcf.js";import"./Layout-e90710df.js";import"./searchForm-96cc0cf8.js";import"./ketanchude-a94e84bc.js";import"./KDocumentTypeDialog-63de8919.js";import"./pagination-3c925a2b.js";import"./batch-6eb7c760.js";import"./index-d761d72f.js";/* empty css                                                               */import"./cha-kong-c10eac4e.js";import"./table-e0a114b8.js";/* empty css                                                                         */import"./portion-e63dfdb7.js";/* empty css                                                                */import"./yuan-hui-31c99901.js";import"./request-util-79a78767.js";const P=[{id:"keyword",label:"关键词",type:"input",inCommonUse:!0,defaultAttribute:{placeholder:"文件名称/申请人/用印编码"}},{id:"applyTime",label:"申请时间",type:"picker",requestType:"array",startRequest:"applyStartTime",endRequest:"applyEndTime",inCommonUse:!0,defaultAttribute:{type:"daterange","start-placeholder":"开始时间","end-placeholder":"结束时间","value-format":"YYYY-MM-DD","disabled-date":e=>e.getTime()>Date.now(),"default-value":[new Date((new Date).setMonth((new Date).getMonth()-1)),new Date]},style:{}},{id:"fileTypeId",requestParams:"fileTypeId",label:"文件类型",type:"derivable",inCommonUse:!1,defaultAttribute:{placeholder:"请选择",type:"fileType",multiple:!0,joinStr:","},options:[]},{id:"sealId",requestParams:"sealId",label:"印章名称",type:"dialog",defaultAttribute:{type:"JySelectSeal",multiple:!1,placeholder:"+印章名称"},options:[]},{id:"applyUser",requestParams:"applyUserId",label:"申请人",type:"derivable",defaultAttribute:{type:"user",multiple:!1,placeholder:"+申请人"},options:[],values:null},{id:"applyOrgan",requestParams:"applyOrganId",label:"申请部门",type:"derivable",defaultAttribute:{type:"organ",multiple:!1,placeholder:"+申请部门"},options:[],values:null},{id:"relatedCompanyId",label:"往来单位",type:"dialog",defaultAttribute:{type:"JyRelatedCompany",multiple:!1,placeholder:"+往来单位"},options:[],values:null},{id:"totalMoney",label:"金额",type:"scopeInput",startAttribute:{placeholder:"最小金额",id:"totalMoneyMin"},endAttribute:{placeholder:"最大金额",id:"totalMoneyMax"}},{id:"applyTime",label:"盖章时间",type:"picker",requestType:"array",startRequest:"applyStartTime",endRequest:"applyEndTime",inCommonUse:!0,defaultAttribute:{type:"daterange","start-placeholder":"开始时间","end-placeholder":"结束时间","value-format":"YYYY-MM-DD"},style:{}},{id:"extSeal",label:"",type:"checkbox",checkbox:[{defaultAttribute:{label:"印章外带","true-label":1,"false-label":0},style:{}}]},{id:"querySelf",label:"",type:"checkbox",checkbox:[{defaultAttribute:{label:"我的申请单据","true-label":1,"false-label":0},style:{}}]}],V=[{id:"keyword",label:"关键词",type:"input",inCommonUse:!0,defaultAttribute:{placeholder:"文件名称/申请人/用印编码"}},{id:"applyTime",label:"申请时间",type:"picker",requestType:"array",startRequest:"applyStartTime",endRequest:"applyEndTime",inCommonUse:!0,defaultAttribute:{type:"daterange","start-placeholder":"开始时间","end-placeholder":"结束时间","value-format":"YYYY-MM-DD","disabled-date":e=>e.getTime()>Date.now(),"default-value":[new Date((new Date).setMonth((new Date).getMonth()-1)),new Date]},style:{}},{id:"fileTypeId",requestParams:"fileTypeId",label:"文件类型",type:"derivable",inCommonUse:!1,defaultAttribute:{placeholder:"请选择",type:"fileType",multiple:!0,joinStr:","},options:[]},{id:"sealId",requestParams:"sealId",label:"印章名称",type:"dialog",defaultAttribute:{type:"JySelectSeal",multiple:!1,placeholder:"+印章名称"},options:[],values:null},{id:"applyUser",requestParams:"applyUserId",label:"申请人",type:"derivable",defaultAttribute:{type:"user",multiple:!1,placeholder:"+申请人"},options:[],values:null},{id:"applyOrgan",requestParams:"applyOrganId",label:"申请部门",type:"derivable",defaultAttribute:{type:"organ",multiple:!1,placeholder:"+申请部门"},options:[],values:null},{id:"relatedCompanyId",label:"往来单位",type:"dialog",defaultAttribute:{type:"JyRelatedCompany",multiple:!1,placeholder:"+往来单位"},options:[],values:null},{id:"totalMoney",label:"金额",type:"scopeInput",startAttribute:{placeholder:"最小金额",id:"totalMoneyMin"},endAttribute:{placeholder:"最大金额",id:"totalMoneyMax"}},{id:"applyTime",label:"盖章时间",type:"picker",requestType:"array",startRequest:"applyStartTime",endRequest:"applyEndTime",inCommonUse:!0,defaultAttribute:{type:"daterange","start-placeholder":"开始时间","end-placeholder":"结束时间","value-format":"YYYY-MM-DD"},style:{}},{id:"status",label:"用印状态",type:"checkButton",data:[{id:"1",name:"正常"},{id:"0",name:"异常"}]},{id:"extSeal",label:"",type:"checkbox",checkbox:[{defaultAttribute:{label:"印章外带","true-label":1,"false-label":0},style:{}}]},{id:"querySelf",label:"",type:"checkbox",checkbox:[{defaultAttribute:{label:"我的申请单据","true-label":1,"false-label":0},style:{}}]}],O=e=>(F("data-v-b30ef6f9"),e=e(),Y(),e),z={class:"PrintControlManagement-recordWithSeal"},$={class:"title"},H=O((()=>_("div",null,"用印记录",-1))),L={class:"title-more"},W=O((()=>_("div",{class:"title-more-add"},null,-1))),G={key:0,class:"title-more-down"},K=O((()=>_("img",{class:"button-icon",src:s,alt:"",srcset:""},null,-1))),Q=O((()=>_("span",null,"更多操作",-1))),X=C("查看已作废的单据"),Z={class:"ap-box"},ee=e({setup(e){const s=a(),C=T(!1),F=T(null),Y=M({show:!1,title:"流程终止",formJson:r}),O=T(null),ee=T("listApproving"),ae=T({listApproving:d,listFileVerification:u,listNoResult:m,listNotUse:c,listNoUse:y,listResultDone:b,listUseDone:h,listUsing:f}),te=T(null),le=e=>{e?O.value.getFormData().then((e=>{alert(JSON.stringify(e))})):O.value.resetForm()},oe=M({componentsTitle:{more:{data:[{name:"查看已作废的单据",codle:"1"}]}},componentsTabs:{data:[{label:"待审批",name:"listApproving"},{label:"待文件核验",name:"listFileVerification"},{label:"待智能用印",name:"listNoUse"},{label:"智能用印中",name:"listUsing"},{label:"已完成用印",name:"listUseDone"},{label:"待上传文件归档",name:"listNoResult"},{label:"已完成归档",name:"listResultDone"},{label:"不可用",name:"listNotUse"}]},componentsSearchForm:{data:w,butData:[{id:"more",name:"展开",type:"unfold",defaultAttribute:{type:"primary"},style:{}},{id:"inquire",name:"查询",type:"click",defaultAttribute:{type:"primary"},style:{}},{id:"reset",name:"重置",type:"click",defaultAttribute:{},style:{}}]},componentsTable:{header:d},componentsDocumentsDetails:{show:!1,visible:[{label:"用印详情",name:"Details-of-Printing"},{label:"审批流程",name:"approval-process"},{label:"领用记录",name:"Record-of-requisition"},{label:"操作记录",name:"operating-record"}]},componentsBatch:{selectionData:[],defaultAttribute:{disabled:!0},data:[{name:"批量作废"}]},JyElMessageBox:{type:"",column:{},flag:"",show:!1,header:{data:""},content:{data:""}},computedData:[],showToastDialog:{show:!1,header:{data:"",icon:"/src/assets/svg/common/warning.svg"},content:{data:""}}});function se(e,a,t,l){"useSealFileName"===a.property&&(oe.componentsDocumentsDetails.show=!0,v.sealBaseInfo({useSealApplyId:e.useSealApplyId}).then((e=>{const a=e.data,t=[{label:"文件名称",value:a.useSealFileName},{label:"单据编码",value:a.useSealApplyNo},{label:"文件类型",value:a.fileTypeName},{label:"文件份数",value:(a.useSealFileNum||0)+"份"},{label:"金额",value:a.totalMoney||"-"},{label:"申请事由",value:a.useSealInfo},{label:"盖章码",value:a.sealCode||"-"},{label:"申请人员",value:a.applyUserName},{label:"申请时间",value:a.applyDatetime},{label:"所属部门",value:a.applyOrganName},{label:"单据状态",value:a.useSealStateName,iconPath:"yuanLv",iconStyle:{},valStyle:{color:"var(--jy-success-6)"}}];a.listSeal.length&&(1===a.listSeal.length?t.splice(t.length-5,0,{label:"印章名称",value:a.listSeal[0].useSealApplySealInfoDto.sealName},{label:"常规盖章",value:a.listSeal[0].useSealApplySealNumDto.applySealNum+"次"}):a.listSeal.forEach(((e,a)=>{t.splice(t.length-5,0,{label:`印章${a+1}名称`,value:e.useSealApplySealInfoDto.sealName},{label:"常规盖章",value:e.useSealApplySealNumDto.applySealNum+"次"})}))),oe.componentsDocumentsDetails.visible[0].basicInformation={show:!0,data:t}})),v.intellect({useSealApplyId:e.useSealApplyId}).then((e=>{var a;(null==(a=e.data)?void 0:a.length)?oe.componentsDocumentsDetails.visible[0].IntelligentPrinting={show:!0,data:e.data}:oe.componentsDocumentsDetails.visible[0].IntelligentPrinting={show:!1,data:[]}})),v.attachment({useSealApplyId:e.useSealApplyId}).then((e=>{var a,t;(null==(a=e.data.fileInfos)?void 0:a.length)||(null==(t=e.data.fileInfoAdds)?void 0:t.length)?oe.componentsDocumentsDetails.visible[0].accessory={show:!0,printedData:e.data.fileInfos,additionalData:e.data.fileInfoAdds}:oe.componentsDocumentsDetails.visible[0].accessory={show:!1,printedData:[],additionalData:[]}})))}function ne(e,a,t,l){oe.JyElMessageBox.type=t.name,oe.JyElMessageBox.column=a,"t-zgj-Revocation"===t.name&&(oe.JyElMessageBox.header.data="提示？",oe.JyElMessageBox.content.data="撤销后本次申请送审将被取消，请问确定要撤销吗？",oe.JyElMessageBox.show=!0),"t-zgj-Void"===t.name&&(oe.JyElMessageBox.header.data="提示？",oe.JyElMessageBox.content.data="作废后当前记录将从当前表格中消失，请问确定要作废吗？",oe.JyElMessageBox.show=!0),"流程终止"===t.name&&(Y.show=!0,Y.title="流程终止",Y.formJson=r),"复核"===t.name&&(Y.show=!0,Y.title="复核",Y.formJson=g),"解除用印限制"===t.name&&(oe.JyElMessageBox.header.data="提示？",oe.JyElMessageBox.content.data="若单据满足【远程盖章】、【实时视频盖章】、【二维码水印校验】、【限时用印】、【印章外带】、【盖前文件内容核验】条件，此操作会取消所有相关校验并将盖章模式转为普通智能用印，以支持用印人跳过限制直接用印，确定要继续吗？",oe.JyElMessageBox.show=!0),"去送审"===t.name&&s.push({name:"InnerPageApplication"})}const ie=()=>{"t-zgj-Revocation"===oe.JyElMessageBox.type?S.withdraw({instanceId:oe.JyElMessageBox.column.gunsSysId}).then((()=>{l("撤销成功"),te.value.reloadData()})).finally((()=>{oe.JyElMessageBox.show=!1})):"t-zgj-Void"===oe.JyElMessageBox.type&&v.invalid({sealUseApplyIds:[oe.JyElMessageBox.column.useSealApplyId]}).then((()=>{te.value.reloadData(),l("作废成功")})).finally((()=>{oe.JyElMessageBox.show=!1}))};function pe(){oe.componentsDocumentsDetails.show=!1}function re(e){oe.componentsTable.header=ae.value[e],ee.value=e,"listApproving"===e||"listUseDone"===e||"listUsing"===e?oe.componentsBatch.data=[{name:"批量作废"}]:"listFileVerification"!==e&&"listNoResult"!==e&&"listNotUse"!==e&&"listNoUse"!==e&&"listResultDone"!==e||(oe.componentsBatch.data=[{name:"批量作废"},{name:"批量流程终止"}]),"listApproving"===e||"listFileVerification"===e||"listNoResult"===e||"listNotUse"===e||"listNoUse"===e||"listResultDone"===e||"listUseDone"===e?oe.componentsTitle.more.data=[{name:"查看已作废的单据"},{name:"导出台账"}]:"listUsing"===e&&(oe.componentsTitle.more.data=[{name:"查看已作废的单据"}]),"listApproving"===e||"listFileVerification"===e||"listNoResult"===e||"listUsing"===e?oe.componentsSearchForm.data=JSON.parse(JSON.stringify(w)):"listNotUse"===e?oe.componentsSearchForm.data=JSON.parse(JSON.stringify(P)):"listNoUse"!==e&&"listResultDone"!==e&&"listUseDone"!==e||(oe.componentsSearchForm.data=JSON.parse(JSON.stringify(V))),q((()=>{te.value.reloadData()}))}function de(e,a){oe.componentsBatch.selectionData=a,F.value={header:{data:"批量作废"},content:{data:"作废后当前记录将从当前表格中消失，请问确定要作废么？"}},oe.showToastDialog.show=!0}const ue=()=>{const e=oe.componentsBatch.selectionData,a=[];e.forEach((e=>{a.push(e.useSealApplyId)})),v.invalid({sealUseApplyIds:a}).then((e=>{te.value.reloadData(),l("作废成功"),oe.showToastDialog.show=!1}))};return x((()=>{})),J((()=>{})),(e,a)=>{const l=j("el-button"),r=j("el-dropdown-item"),d=j("el-dropdown-menu"),u=j("el-dropdown"),m=j("v-form-render"),c=o;return I(),U("div",z,[B(n,{url:`/sealApply/${ee.value}`,ref_key:"jyTable",ref:te,hasTabs:"",componentsSearchForm:k(oe).componentsSearchForm,componentsTableHeader:k(oe).componentsTable.header,componentsBatch:k(oe).componentsBatch,computedData:"listApproving"===ee.value?k(oe).computedData:[],tableClick:"useSealFileName",onCellClick:se,onCustomClick:ne,onClickBatchButton:de},{title:N((()=>[_("div",$,[H,_("div",L,[W,k(oe).componentsTitle.more.data.length>0?(I(),U("div",G,[B(u,null,{dropdown:N((()=>[B(d,null,{default:N((()=>[B(r,{onClick:a[0]||(a[0]=e=>k(s).push({name:"VoidApply"}))},{default:N((()=>[X])),_:1})])),_:1})])),default:N((()=>[B(l,null,{default:N((()=>[K,Q])),_:1})])),_:1})])):E("",!0)])])])),tabs:N((()=>[_("div",null,[B(i,{activeName:ee.value,data:k(oe).componentsTabs.data,onTabChange:re},null,8,["activeName","data"])])])),_:1},8,["url","componentsSearchForm","componentsTableHeader","componentsBatch","computedData"]),_("div",Z,[B(p,{show:k(oe).componentsDocumentsDetails.show,visible:k(oe).componentsDocumentsDetails.visible,onClickClose:pe},null,8,["show","visible"])]),B(c,{"onUpdate:show":a[1]||(a[1]=e=>k(Y).show=e),show:k(Y).show,title:k(Y).title,oneBtn:!1,centerBtn:"",confirmText:e.$t("t-zgj-operation.submit"),concelText:e.$t("t-zgj-operation.cancel"),onClose:le},{default:N((()=>[(I(),R(m,{"form-json":k(Y).formJson,"form-data":k(Y).formJson,"option-data":k(Y).optionData,ref_key:"vFormLibraryRef",ref:O,key:k(Y).title},null,8,["form-json","form-data","option-data"]))])),_:1},8,["show","title","confirmText","concelText"]),C.value?(I(),R(k(t),{key:0,show:C.value,"onUpdate:show":a[2]||(a[2]=e=>C.value=e)},null,8,["show"])):E("",!0),B(D,{modelValue:k(oe).JyElMessageBox.show,"onUpdate:modelValue":[a[3]||(a[3]=e=>k(oe).JyElMessageBox.show=e),k(oe).JyElMessageBox.show],JyElMessageBox:k(oe).JyElMessageBox,onSubmitElMessageBox:ie},null,8,["modelValue","JyElMessageBox","onUpdate:modelValue"]),B(k(A),{"onUpdate:modelValue":a[4]||(a[4]=e=>k(oe).showToastDialog.show=!1),show:k(oe).showToastDialog.show,selectionData:k(oe).componentsBatch.selectionData,showToastDialogContent:F.value,label:"useSealFileName",onSureAction:ue},null,8,["show","selectionData","showToastDialogContent"])])}}},[["__scopeId","data-v-b30ef6f9"]]);export{ee as default};
