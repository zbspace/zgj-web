import{g as e,j as a,P as l,n as t}from"./chunk-vform-d740b35c.js";import{J as s}from"./JyTable-d62bb35b.js";import{c as o}from"./documentsDetails-8b022303.js";import{d as n,l as i,a as r,b as p,c as m,e as u,f as c,g as d,h as y}from"./listUsing-651ca84e.js";import{R as h}from"./RecordSealToReview-dca792f4.js";import{a as g}from"./sealApplyIntellect-1d3f9162.js";import{a as b}from"./actionOneDialog-54db6636.js";import{A as f}from"./ApproverApi-e2fa2d39.js";import{r as v,b as w,a9 as S,a1 as B,C as x,F as J,G as D,B as j,N as M,u as E,H as _,Q as A,J as k,V as I,W as T}from"./chunk-element-plus-a77de3d2.js";import"./sangedian-6ea00dcf.js";import"./Layout-e90710df.js";import"./searchForm-96cc0cf8.js";import"./ketanchude-a94e84bc.js";import"./KDocumentTypeDialog-63de8919.js";import"./pagination-3c925a2b.js";import"./batch-6eb7c760.js";import"./index-d761d72f.js";import"./cha-kong-c10eac4e.js";import"./JyTabs-726242c5.js";/* empty css                                                               */import"./table-e0a114b8.js";/* empty css                                                                         */import"./portion-e63dfdb7.js";/* empty css                                                                */import"./yuan-hui-31c99901.js";import"./request-util-79a78767.js";const N={class:"PrintControlManagement-recordWithSeal"},U=(e=>(I("data-v-812c6b64"),e=e(),T(),e))((()=>_("div",{class:"title"},[_("div",null,"已作废单据")],-1))),C={class:"ap-box"},F=e({setup(e){const I=a(),T=v(!1),F=w({show:!1,title:"流程终止",formJson:n}),R=v(null);v({listApproving:i,listFileVerification:r,listNoResult:p,listNotUse:m,listNoUse:u,listResultDone:c,listUseDone:d,listUsing:y});const V=v(null),P=e=>{e?R.value.getFormData().then((e=>{alert(JSON.stringify(e))})):R.value.resetForm()},q=w({componentsSearchForm:{data:[{id:"keyword",label:"关键词",type:"input",inCommonUse:!0,defaultAttribute:{placeholder:"文件名称/申请人/用印编码"}},{id:"applyTime",label:"申请时间",type:"picker",requestType:"array",startRequest:"applyStartTime",endRequest:"applyEndTime",inCommonUse:!0,defaultAttribute:{type:"daterange","start-placeholder":"开始时间","end-placeholder":"结束时间","value-format":"YYYY-MM-DD","disabled-date":e=>e.getTime()>Date.now(),"default-value":[new Date((new Date).setMonth((new Date).getMonth()-1)),new Date]},style:{}}],butData:[{id:"inquire",name:"查询",type:"click",defaultAttribute:{type:"primary"},style:{}},{id:"reset",name:"重置",type:"click",defaultAttribute:{},style:{}}]},componentsTable:{header:i},componentsDocumentsDetails:{show:!1,visible:[{label:"用印详情",name:"Details-of-Printing"},{label:"审批流程",name:"approval-process"},{label:"领用记录",name:"Record-of-requisition"},{label:"操作记录",name:"operating-record"}]},componentsBatch:{selectionData:[],defaultAttribute:{disabled:!0},data:[{name:"批量作废"}]},JyElMessageBox:{type:"",row:"",flag:"",show:!1,header:{data:""},content:{data:""}}});function z(e,a,l,t){"useSealFileName"===a.property&&g.sealBaseInfo({useSealApplyId:e.useSealApplyId}).then((e=>{const a=e.data,l=[{label:"文件名称",value:a.useSealFileName},{label:"单据编码",value:a.useSealApplyNo},{label:"文件类型",value:a.fileTypeName},{label:"文件份数",value:(a.useSealFileNum||0)+"份"},{label:"金额",value:a.totalMoney||"-"},{label:"申请事由",value:a.useSealInfo},{label:"盖章码",value:a.sealCode||"-"},{label:"申请人员",value:a.applyUserName},{label:"申请时间",value:a.applyDatetime},{label:"所属部门",value:a.applyOrganName},{label:"单据状态",value:"APPROVAL"===a.useSealStateId?"用印审批中":"USING"===a.useSealStateId?"智能用印中":"",iconPath:"yuanLv",iconStyle:{},valStyle:{color:"var(--jy-success-6)"}}];a.listSeal.length&&(1===a.listSeal.length?l.splice(l.length-5,0,{label:"印章名称",value:a.listSeal[0].useSealApplySealInfoDto.sealName},{label:"常规盖章",value:a.listSeal[0].useSealApplySealNumDto.applySealNum+"次"}):a.listSeal.forEach(((e,a)=>{l.splice(l.length-5,0,{label:`印章${a+1}名称`,value:e.useSealApplySealInfoDto.sealName},{label:"常规盖章",value:e.useSealApplySealNumDto.applySealNum+"次"})}))),q.componentsDocumentsDetails.visible[0].basicInformation={show:!0,data:l},q.componentsDocumentsDetails.show=!0}))}function O(e,a,l,t){q.JyElMessageBox.type=l.name,q.JyElMessageBox.row=e,"t-zgj-Revocation"===l.name&&(q.JyElMessageBox.header.data="提示？",q.JyElMessageBox.content.data="撤销后本次申请送审将被取消，请问确定要撤销吗？",q.JyElMessageBox.show=!0),"t-zgj-Void"===l.name&&(q.JyElMessageBox.header.data="提示？",q.JyElMessageBox.content.data="作废后当前记录将从当前表格中消失，请问确定要作废吗？",q.JyElMessageBox.show=!0),"流程终止"===l.name&&(F.show=!0,F.title="流程终止",F.formJson=n),"复核"===l.name&&(F.show=!0,F.title="复核",F.formJson=h),"解除用印限制"===l.name&&(q.JyElMessageBox.header.data="提示？",q.JyElMessageBox.content.data="若单据满足【远程盖章】、【实时视频盖章】、【二维码水印校验】、【限时用印】、【印章外带】、【盖前文件内容核验】条件，此操作会取消所有相关校验并将盖章模式转为普通智能用印，以支持用印人跳过限制直接用印，确定要继续吗？",q.JyElMessageBox.show=!0),"去送审"===l.name&&I.push({name:"InnerPageApplication"})}const Y=()=>{"t-zgj-Revocation"===q.JyElMessageBox.type?f.withdraw({taskId:q.JyElMessageBox.row.taskId}).then((()=>{g.cancel({sealUseApplyIds:q.JyElMessageBox.row.useSealApplyId}).then((()=>{V.value.reloadData()})).finally((()=>{q.JyElMessageBox.show=!1}))})).finally((()=>{q.JyElMessageBox.show=!1})):"t-zgj-Void"===q.JyElMessageBox.type&&f.withdraw({taskId:q.JyElMessageBox.row.taskId}).then((()=>{g.invalid({sealUseApplyIds:q.JyElMessageBox.row.useSealApplyId}).then((()=>{V.value.reloadData()})).finally((()=>{q.JyElMessageBox.show=!1}))})).finally((()=>{q.JyElMessageBox.show=!1}))};function L(){q.componentsDocumentsDetails.show=!1}return S((()=>{})),B((()=>{})),(e,a)=>{const n=x("v-form-render"),i=t;return J(),D("div",N,[j(s,{url:"/sealApply/listInvalid",ref_key:"jyTable",ref:V,method:"POST",componentsSearchForm:E(q).componentsSearchForm,componentsTableHeader:E(q).componentsTable.header,componentsBatch:E(q).componentsBatch,tableClick:"useSealFileName",onCellClick:z,onCustomClick:O,onClickBatchButton:e.clickBatchButton},{title:M((()=>[U])),_:1},8,["componentsSearchForm","componentsTableHeader","componentsBatch","onClickBatchButton"]),_("div",C,[j(o,{show:E(q).componentsDocumentsDetails.show,visible:E(q).componentsDocumentsDetails.visible,onClickClose:L},null,8,["show","visible"])]),j(i,{"onUpdate:show":a[0]||(a[0]=e=>E(F).show=e),show:E(F).show,title:E(F).title,oneBtn:!1,confirmText:e.$t("t-zgj-operation.submit"),concelText:e.$t("t-zgj-operation.cancel"),onClose:P},{default:M((()=>[(J(),A(n,{"form-json":E(F).formJson,"form-data":E(F).formJson,"option-data":E(F).optionData,ref_key:"vFormLibraryRef",ref:R,key:E(F).title},null,8,["form-json","form-data","option-data"]))])),_:1},8,["show","title","confirmText","concelText"]),T.value?(J(),A(E(l),{key:0,show:T.value,"onUpdate:show":a[1]||(a[1]=e=>T.value=e)},null,8,["show"])):k("",!0),j(b,{modelValue:E(q).JyElMessageBox.show,"onUpdate:modelValue":[a[2]||(a[2]=e=>E(q).JyElMessageBox.show=e),E(q).JyElMessageBox.show],JyElMessageBox:E(q).JyElMessageBox,onSubmitElMessageBox:Y},null,8,["modelValue","JyElMessageBox","onUpdate:modelValue"])])}}},[["__scopeId","data-v-812c6b64"]]);export{F as default};
